<Directory /path/to/Artists_on_Twitter_Finder/public>										# MODIFIER ICI
	Options MultiViews
	DirectoryIndex index
	AddLanguage en .fr.html
	AddLanguage fr .fr.html
	LanguagePriority en fr
	ForceLanguagePriority Fallback

	Require all granted
</Directory>

<VirtualHost *:80>
	ServerName sub.domain.tld																# MODIFIER ICI
	DocumentRoot /path/to/Artists_on_Twitter_Finder/public									# MODIFIER ICI

	ErrorLog ${APACHE_LOG_DIR}/sub.domain.tld_error.log										# MODIFIER ICI
	CustomLog ${APACHE_LOG_DIR}/sub.domain.tld_access.log combined							# MODIFIER ICI

	Header always set Strict-Transport-Security "max-age=63072000; preload"

	<LocationMatch "/api/">
		ProxyAddHeaders On
		ProxyPass http://localhost:3301/
		ProxyPassReverse http://localhost:3301/
		Header set Access-Control-Allow-Origin "*"											# MODIFIER ICI
	</LocationMatch>

	<IfModule mod_ssl.c>
		RewriteEngine On
		RewriteCond %{REQUEST_URI} !^/\.well\-known/acme\-challenge/
		RewriteRule ^(.*)$ https://%{HTTP_HOST}$1 [R=301,L]
	</IfModule>
</VirtualHost>

<IfModule mod_ssl.c>
	<VirtualHost *:443>
		ServerName sub.domain.tld															# MODIFIER ICI
		DocumentRoot /path/to/Artists_on_Twitter_Finder/public								# MODIFIER ICI

		ErrorLog ${APACHE_LOG_DIR}/sub.domain.tld_error.log									# MODIFIER ICI
		CustomLog ${APACHE_LOG_DIR}/sub.domain.tld_access.log combined						# MODIFIER ICI

		Header always set Referrer-Policy "strict-origin-when-cross-origin"
		Header always set Strict-Transport-Security "max-age=63072000; preload"

		Header set Content-Security-Policy \
"base-uri 'self'; \
connect-src 'self'; \
default-src 'none'; \
form-action 'self'; \
frame-ancestors 'none'; \
frame-src platform.twitter.com; \
script-src 'self' platform.twitter.com; \
style-src 'self'; \
upgrade-insecure-requests"

		Header always set X-Content-Type-Options "nosniff"
		Header always set X-Frame-Options "DENY"
		Header always set X-XSS-Protection "1; mode=block"

		# Configuration SSL avec compatibilité intermédiaire
		# Générée par Mozilla : https://ssl-config.mozilla.org
		SSLProtocol all -SSLv3 -TLSv1 -TLSv1.1
		SSLCipherSuite ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384
		SSLHonorCipherOrder Off
		SSLSessionTickets Off
		SSLUseStapling On

		SSLCertificateFile /etc/letsencrypt/live/sub.domain.tld/fullchain.pem				# MODIFIER ICI
		SSLCertificateKeyFile /etc/letsencrypt/live/sub.domain.tld/privkey.pem				# MODIFIER ICI

		<LocationMatch "/api/">
			ProxyAddHeaders On
			ProxyPass http://localhost:3301/
			ProxyPassReverse http://localhost:3301/
			Header set Access-Control-Allow-Origin "*"										# MODIFIER ICI
		</LocationMatch>
	</VirtualHost>

	SSLStaplingCache "shmcb:logs/ssl_stapling(32768)"
</IfModule>